{"version":3,"file":"scripts.js","names":["_pouchdb","_interopRequireDefault","require","e","__esModule","$","db","PouchDB","document","ready","console","log","year","Date","getFullYear","text","makeInput","elem","str","elem2","num","length","concat","before","on","preventDefault","elemClass","attr","indexOf","closest","remove","allDocs","include_docs","descending","err","data","rows","family","map","val","i","parents","doc","parent","children","child","theParents","theChildren","arr","j","append","hide","obj","inputs","name","push","id","_id","put","then","response","status","message","names","split","html","show"],"sources":["../scripts.js"],"sourcesContent":["const $ = require('jquery');\r\nimport PouchDB from 'pouchdb';\r\nconst db = new PouchDB('attendees');\r\n\r\n$(document).ready(function () {\r\n    console.log(`ready`);\r\n\r\n    var year = new Date().getFullYear();\r\n    $('header h1 span, footer p span').text(year);\r\n\r\n    var makeInput = (elem, str, elem2) => {\r\n        //?get number of inputs\r\n        var num = $(elem).length;\r\n        // console.log(num);\r\n\r\n        //?add 1\r\n        num = num + 1;\r\n\r\n        //?make the elem\r\n        var elem = `<div class=\"extra-input\">\r\n        <label>${str} Name</label>\r\n        <a class=\"remove-input\" href=\"#\">remove</a>\r\n        <input type=\"text\" name=\"${str}-${num}\" class=\"${str}\">\r\n        </div>`;\r\n\r\n        //?add the elem to the page\r\n        $(elem2).before(elem);\r\n    };\r\n\r\n    //? add more inputs\r\n    $('.add-more').on('click', function (e) {\r\n        e.preventDefault();\r\n        var elemClass = $(this).attr('class');\r\n        // console.log(elemClass);\r\n\r\n        if (elemClass.indexOf('parent') !== -1) {\r\n            // console.log(`adding input for parents`);\r\n            makeInput('input.parent', 'parent', 'button.add-more.parent');\r\n\r\n        } else {\r\n            // console.log(`adding input for children`)\r\n            makeInput('input.child', 'child', 'button.add-more.child');\r\n        }\r\n    })\r\n\r\n    //? remove extra inputs\r\n    $('body').on('click', '.remove-input', function (e) {\r\n        e.preventDefault();\r\n        console.log('removed input clicked');\r\n        $(this).closest('.extra-input').remove();\r\n    });\r\n\r\n    //? destroy db\r\n    // db.destroy().then((res) => {\r\n    //     console.log('destroyed db');\r\n    //     console.log(res);\r\n    // })\r\n\r\n    //? remove a doc\r\n    // db.remove('--2024');\r\n\r\n    //? on page load get db and show if any entries\r\n    db.allDocs({ include_docs: true, descending: true }, function (err, data) {\r\n        console.log(data);\r\n        if (data.rows.length > 0) {\r\n            var family = data.rows;\r\n            family.map((val, i) => {\r\n                console.log(val, i);\r\n\r\n                var parents = val.doc.parent;\r\n                var children = val.doc.child;\r\n\r\n                var theParents = ``;\r\n                var theChildren = ``;\r\n\r\n                if (parents.length < 2) {\r\n                    theParents = `and their Parent ${parents[0]}`\r\n                } else {\r\n                    parents.map((arr, j) => {\r\n                        theParents = `${theParents} ${arr},`\r\n                    });\r\n\r\n                    theParents = `and their Parents ${theParents}`;\r\n                }\r\n\r\n                if (children.length < 2) {\r\n                    theChildren = `<span>${children[0]}</span>`;\r\n                } else {\r\n                    children.map((arr, j) => {\r\n                        theChildren = `${theChildren} <span>${arr}</span>,`\r\n                    });\r\n                }\r\n\r\n                var elem = `<li><div>${theChildren} ${theParents}</div></li>`;\r\n\r\n                $('.c2 ul').append(elem);\r\n            });\r\n        }\r\n    });\r\n\r\n    $('.send').on('click', function (e) {\r\n        e.preventDefault();\r\n\r\n        $('.error-message').hide();\r\n        $('.error-message').text('');\r\n\r\n        var obj = {\r\n            parent: [],\r\n            child: []\r\n        };\r\n\r\n        //? get all the input and data\r\n        var inputs = $('input');\r\n        inputs.map((i, val) => {\r\n            // console.log(i, val);\r\n            if ($(val).val() !== '') {\r\n                // console.log($(val).val());\r\n                // console.log($(val).attr('name'));\r\n\r\n                var name = $(val).val();\r\n                var attr = $(val).attr('name');\r\n\r\n                if (attr.indexOf('parent') !== -1) {\r\n                    obj.parent.push(name);\r\n                } else {\r\n                    obj.child.push(name);\r\n                }\r\n            }\r\n        });\r\n\r\n        var id = `${$('input[name=\"child-1\"]').val()}-${$('input[name=\"parent-1\"]').val()}-2024`;\r\n        obj._id = id;\r\n\r\n        // console.log(obj);\r\n\r\n        if (obj.parent.length !== 0 && obj.child.length !== 0) {\r\n\r\n            //? send data to pouchdb\r\n            db.put(obj).then(function (response) {\r\n                // handle response\r\n                // console.log(response);\r\n            }).then(function (data) {\r\n\r\n                $('.c2 ul li').remove();\r\n\r\n                db.allDocs({ include_docs: true, descending: true }, function (err, data) {\r\n                    console.log(data);\r\n\r\n                    var family = data.rows;\r\n                    family.map((val, i) => {\r\n                        console.log(val, i);\r\n\r\n                        var parents = val.doc.parent;\r\n                        var children = val.doc.child;\r\n\r\n                        var theParents = ``;\r\n                        var theChildren = ``;\r\n\r\n                        if (parents.length < 2) {\r\n                            theParents = `and their Parent ${parents[0]}`\r\n                        } else {\r\n                            parents.map((arr, j) => {\r\n                                theParents = `${theParents} ${arr},`\r\n                            });\r\n\r\n                            theParents = `and their Parents ${theParents}`;\r\n                        }\r\n\r\n                        if (children.length < 2) {\r\n                            theChildren = `<span>${children[0]}</span>`;\r\n                        } else {\r\n                            children.map((arr, j) => {\r\n                                theChildren = `${theChildren} <span>${arr}</span>,`\r\n                            });\r\n                        }\r\n\r\n                        var elem = `<li><div>${theChildren} ${theParents}</div></li>`;\r\n\r\n                        $('.c2 ul').append(elem);\r\n                    });\r\n\r\n                });\r\n            }).catch(function (err) {\r\n                console.log(`oops something went wrong.`)\r\n                console.log(err);\r\n\r\n                if (err.status == 409) {\r\n                    console.log(err.message);\r\n                    var names = err.id;\r\n                    names = names.split('-');\r\n                    var str = `Looks like <span>${names[0]}</span> and <span>${names[1]}</span> has already been submitted.`;\r\n                    $('.error-message').html(str).show();\r\n                }\r\n            });\r\n\r\n        } else {\r\n            var str = `Please enter a <span>parent</span> name and a <span>child</span> name.`;\r\n            $('.error-message').html(str).show();\r\n        }\r\n\r\n\r\n    });\r\n});"],"mappings":"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","ignoreList":[]}